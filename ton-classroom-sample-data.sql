-- Script ƒë·ªÉ th√™m d·ªØ li·ªáu m·∫´u cho classroom "T√¥n" (ID = 1)
-- S·ª≠ d·ª•ng SQL Server syntax

USE SchoolManagementDB;
GO

-- B·∫Øt ƒë·∫ßu transaction
BEGIN TRANSACTION;

PRINT N'üîÑ B·∫Øt ƒë·∫ßu t·∫°o d·ªØ li·ªáu m·∫´u cho classroom T√¥n...';

-- 1. T·∫°o 5 h·ªçc sinh m·ªõi
PRINT N'üìö T·∫°o 5 h·ªçc sinh m·ªõi...';

-- Ki·ªÉm tra v√† t·∫°o h·ªçc sinh 1
IF NOT EXISTS (SELECT 1 FROM users WHERE email = 'nguyenvanan.ton@student.edu.vn')
BEGIN
    INSERT INTO users (username, email, full_name, password, role_id, status, created_at, updated_at)
    VALUES ('student_ton_1', 'nguyenvanan.ton@student.edu.vn', N'Nguy·ªÖn VƒÉn An', 
            '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lbdxIh0Ca5gZb8YS6', 1, 'active', GETDATE(), GETDATE());
    PRINT N'‚úÖ T·∫°o h·ªçc sinh: Nguy·ªÖn VƒÉn An';
END

-- Ki·ªÉm tra v√† t·∫°o h·ªçc sinh 2
IF NOT EXISTS (SELECT 1 FROM users WHERE email = 'tranthibinh.ton@student.edu.vn')
BEGIN
    INSERT INTO users (username, email, full_name, password, role_id, status, created_at, updated_at)
    VALUES ('student_ton_2', 'tranthibinh.ton@student.edu.vn', N'Tr·∫ßn Th·ªã B√¨nh', 
            '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lbdxIh0Ca5gZb8YS6', 1, 'active', GETDATE(), GETDATE());
    PRINT N'‚úÖ T·∫°o h·ªçc sinh: Tr·∫ßn Th·ªã B√¨nh';
END

-- Ki·ªÉm tra v√† t·∫°o h·ªçc sinh 3
IF NOT EXISTS (SELECT 1 FROM users WHERE email = 'lehoangcuong.ton@student.edu.vn')
BEGIN
    INSERT INTO users (username, email, full_name, password, role_id, status, created_at, updated_at)
    VALUES ('student_ton_3', 'lehoangcuong.ton@student.edu.vn', N'L√™ Ho√†ng C∆∞·ªùng', 
            '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lbdxIh0Ca5gZb8YS6', 1, 'active', GETDATE(), GETDATE());
    PRINT N'‚úÖ T·∫°o h·ªçc sinh: L√™ Ho√†ng C∆∞·ªùng';
END

-- Ki·ªÉm tra v√† t·∫°o h·ªçc sinh 4
IF NOT EXISTS (SELECT 1 FROM users WHERE email = 'phamthidung.ton@student.edu.vn')
BEGIN
    INSERT INTO users (username, email, full_name, password, role_id, status, created_at, updated_at)
    VALUES ('student_ton_4', 'phamthidung.ton@student.edu.vn', N'Ph·∫°m Th·ªã Dung', 
            '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lbdxIh0Ca5gZb8YS6', 1, 'active', GETDATE(), GETDATE());
    PRINT N'‚úÖ T·∫°o h·ªçc sinh: Ph·∫°m Th·ªã Dung';
END

-- Ki·ªÉm tra v√† t·∫°o h·ªçc sinh 5
IF NOT EXISTS (SELECT 1 FROM users WHERE email = 'hoangvanem.ton@student.edu.vn')
BEGIN
    INSERT INTO users (username, email, full_name, password, role_id, status, created_at, updated_at)
    VALUES ('student_ton_5', 'hoangvanem.ton@student.edu.vn', N'Ho√†ng VƒÉn Em', 
            '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lbdxIh0Ca5gZb8YS6', 1, 'active', GETDATE(), GETDATE());
    PRINT N'‚úÖ T·∫°o h·ªçc sinh: Ho√†ng VƒÉn Em';
END

-- 2. ƒêƒÉng k√Ω h·ªçc sinh v√†o classroom "T√¥n" (ID = 1)
PRINT N'üìù ƒêƒÉng k√Ω h·ªçc sinh v√†o classroom...';

-- L·∫•y ID c·ªßa c√°c h·ªçc sinh v·ª´a t·∫°o
DECLARE @student1_id INT = (SELECT id FROM users WHERE email = 'nguyenvanan.ton@student.edu.vn');
DECLARE @student2_id INT = (SELECT id FROM users WHERE email = 'tranthibinh.ton@student.edu.vn');
DECLARE @student3_id INT = (SELECT id FROM users WHERE email = 'lehoangcuong.ton@student.edu.vn');
DECLARE @student4_id INT = (SELECT id FROM users WHERE email = 'phamthidung.ton@student.edu.vn');
DECLARE @student5_id INT = (SELECT id FROM users WHERE email = 'hoangvanem.ton@student.edu.vn');

-- ƒêƒÉng k√Ω t·ª´ng h·ªçc sinh v√†o classroom
IF NOT EXISTS (SELECT 1 FROM classroom_enrollments WHERE classroom_id = 1 AND user_id = @student1_id)
BEGIN
    INSERT INTO classroom_enrollments (classroom_id, user_id) VALUES (1, @student1_id);
    PRINT N'‚úÖ ƒêƒÉng k√Ω Nguy·ªÖn VƒÉn An v√†o classroom T√¥n';
END

IF NOT EXISTS (SELECT 1 FROM classroom_enrollments WHERE classroom_id = 1 AND user_id = @student2_id)
BEGIN
    INSERT INTO classroom_enrollments (classroom_id, user_id) VALUES (1, @student2_id);
    PRINT N'‚úÖ ƒêƒÉng k√Ω Tr·∫ßn Th·ªã B√¨nh v√†o classroom T√¥n';
END

IF NOT EXISTS (SELECT 1 FROM classroom_enrollments WHERE classroom_id = 1 AND user_id = @student3_id)
BEGIN
    INSERT INTO classroom_enrollments (classroom_id, user_id) VALUES (1, @student3_id);
    PRINT N'‚úÖ ƒêƒÉng k√Ω L√™ Ho√†ng C∆∞·ªùng v√†o classroom T√¥n';
END

IF NOT EXISTS (SELECT 1 FROM classroom_enrollments WHERE classroom_id = 1 AND user_id = @student4_id)
BEGIN
    INSERT INTO classroom_enrollments (classroom_id, user_id) VALUES (1, @student4_id);
    PRINT N'‚úÖ ƒêƒÉng k√Ω Ph·∫°m Th·ªã Dung v√†o classroom T√¥n';
END

IF NOT EXISTS (SELECT 1 FROM classroom_enrollments WHERE classroom_id = 1 AND user_id = @student5_id)
BEGIN
    INSERT INTO classroom_enrollments (classroom_id, user_id) VALUES (1, @student5_id);
    PRINT N'‚úÖ ƒêƒÉng k√Ω Ho√†ng VƒÉn Em v√†o classroom T√¥n';
END

-- 3. T·∫°o 5 b√†i t·∫≠p c·∫ßn ch·∫•m ƒëi·ªÉm (c√≥ submission nh∆∞ng ch∆∞a ch·∫•m)
PRINT N'üìã T·∫°o 5 b√†i t·∫≠p c·∫ßn ch·∫•m ƒëi·ªÉm...';

-- B√†i t·∫≠p 1
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p ƒê·∫°o h√†m v√† T√≠ch ph√¢n - C·∫ßn ch·∫•m ƒëi·ªÉm', 
        N'B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c h·ªçc sinh n·ªôp b√†i nh∆∞ng ch∆∞a ƒë∆∞·ª£c gi√°o vi√™n ch·∫•m ƒëi·ªÉm. C·∫ßn gi√°o vi√™n xem x√©t v√† ƒë√°nh gi√°.',
        DATEADD(day, 10, GETDATE()), 100, 1);

-- B√†i t·∫≠p 2
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'Th·ª±c h√†nh Gi·∫£i ph∆∞∆°ng tr√¨nh vi ph√¢n - C·∫ßn ch·∫•m ƒëi·ªÉm', 
        N'B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c h·ªçc sinh n·ªôp b√†i nh∆∞ng ch∆∞a ƒë∆∞·ª£c gi√°o vi√™n ch·∫•m ƒëi·ªÉm. C·∫ßn gi√°o vi√™n xem x√©t v√† ƒë√°nh gi√°.',
        DATEADD(day, 11, GETDATE()), 100, 1);

-- B√†i t·∫≠p 3
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p Ma tr·∫≠n v√† ƒê·ªãnh th·ª©c n√¢ng cao - C·∫ßn ch·∫•m ƒëi·ªÉm', 
        N'B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c h·ªçc sinh n·ªôp b√†i nh∆∞ng ch∆∞a ƒë∆∞·ª£c gi√°o vi√™n ch·∫•m ƒëi·ªÉm. C·∫ßn gi√°o vi√™n xem x√©t v√† ƒë√°nh gi√°.',
        DATEADD(day, 12, GETDATE()), 100, 1);

-- B√†i t·∫≠p 4
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'·ª®ng d·ª•ng To√°n h·ªçc trong Kinh t·∫ø - C·∫ßn ch·∫•m ƒëi·ªÉm', 
        N'B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c h·ªçc sinh n·ªôp b√†i nh∆∞ng ch∆∞a ƒë∆∞·ª£c gi√°o vi√™n ch·∫•m ƒëi·ªÉm. C·∫ßn gi√°o vi√™n xem x√©t v√† ƒë√°nh gi√°.',
        DATEADD(day, 13, GETDATE()), 100, 1);

-- B√†i t·∫≠p 5
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p t·ªïng h·ª£p Gi·∫£i t√≠ch - C·∫ßn ch·∫•m ƒëi·ªÉm', 
        N'B√†i t·∫≠p n√†y ƒë√£ ƒë∆∞·ª£c h·ªçc sinh n·ªôp b√†i nh∆∞ng ch∆∞a ƒë∆∞·ª£c gi√°o vi√™n ch·∫•m ƒëi·ªÉm. C·∫ßn gi√°o vi√™n xem x√©t v√† ƒë√°nh gi√°.',
        DATEADD(day, 14, GETDATE()), 100, 1);

PRINT N'‚úÖ ƒê√£ t·∫°o 5 b√†i t·∫≠p c·∫ßn ch·∫•m ƒëi·ªÉm';

-- 4. T·∫°o 5 b√†i t·∫≠p s·∫Øp h·∫øt h·∫°n (due_date trong 1-3 ng√†y t·ªõi)
PRINT N'‚è∞ T·∫°o 5 b√†i t·∫≠p s·∫Øp h·∫øt h·∫°n...';

-- B√†i t·∫≠p s·∫Øp h·∫øt h·∫°n 1
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i ki·ªÉm tra Gi·ªõi h·∫°n v√† Li√™n t·ª•c - S·∫Øp h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y s·∫Øp h·∫øt h·∫°n n·ªôp. H·ªçc sinh c·∫ßn ho√†n th√†nh v√† n·ªôp b√†i trong 1 ng√†y t·ªõi ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ h·∫°n.',
        DATEADD(day, 1, GETDATE()), 80, 1);

-- B√†i t·∫≠p s·∫Øp h·∫øt h·∫°n 2
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'Th·ª±c h√†nh T√≠nh t√≠ch ph√¢n b·∫±ng ph∆∞∆°ng ph√°p th·∫ø - S·∫Øp h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y s·∫Øp h·∫øt h·∫°n n·ªôp. H·ªçc sinh c·∫ßn ho√†n th√†nh v√† n·ªôp b√†i trong 2 ng√†y t·ªõi ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ h·∫°n.',
        DATEADD(day, 2, GETDATE()), 85, 1);

-- B√†i t·∫≠p s·∫Øp h·∫øt h·∫°n 3
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p Chu·ªói s·ªë v√† Chu·ªói h√†m - S·∫Øp h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y s·∫Øp h·∫øt h·∫°n n·ªôp. H·ªçc sinh c·∫ßn ho√†n th√†nh v√† n·ªôp b√†i trong 3 ng√†y t·ªõi ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ h·∫°n.',
        DATEADD(day, 3, GETDATE()), 90, 1);

-- B√†i t·∫≠p s·∫Øp h·∫øt h·∫°n 4
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'·ª®ng d·ª•ng ƒê·∫°o h√†m trong H√¨nh h·ªçc - S·∫Øp h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y s·∫Øp h·∫øt h·∫°n n·ªôp. H·ªçc sinh c·∫ßn ho√†n th√†nh v√† n·ªôp b√†i trong 4 ng√†y t·ªõi ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ h·∫°n.',
        DATEADD(day, 4, GETDATE()), 95, 1);

-- B√†i t·∫≠p s·∫Øp h·∫øt h·∫°n 5
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p Ph∆∞∆°ng tr√¨nh tham s·ªë - S·∫Øp h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y s·∫Øp h·∫øt h·∫°n n·ªôp. H·ªçc sinh c·∫ßn ho√†n th√†nh v√† n·ªôp b√†i trong 5 ng√†y t·ªõi ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ h·∫°n.',
        DATEADD(day, 5, GETDATE()), 100, 1);

PRINT N'‚úÖ ƒê√£ t·∫°o 5 b√†i t·∫≠p s·∫Øp h·∫øt h·∫°n';

-- 5. T·∫°o 5 b√†i t·∫≠p ƒë√£ h·∫øt h·∫°n (due_date ƒë√£ qua 1-7 ng√†y)
PRINT N'üìÖ T·∫°o 5 b√†i t·∫≠p ƒë√£ h·∫øt h·∫°n...';

-- B√†i t·∫≠p ƒë√£ h·∫øt h·∫°n 1
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p H√†m s·ªë m·ªôt bi·∫øn - ƒê√£ h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y ƒë√£ h·∫øt h·∫°n n·ªôp t·ª´ 1 ng√†y tr∆∞·ªõc. M·ªôt s·ªë h·ªçc sinh c√≥ th·ªÉ ƒë√£ n·ªôp b√†i, m·ªôt s·ªë c√≥ th·ªÉ ch∆∞a n·ªôp.',
        DATEADD(day, -1, GETDATE()), 90, 1);

-- B√†i t·∫≠p ƒë√£ h·∫øt h·∫°n 2
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'Th·ª±c h√†nh T√≠nh ƒë·∫°o h√†m c·∫•p cao - ƒê√£ h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y ƒë√£ h·∫øt h·∫°n n·ªôp t·ª´ 2 ng√†y tr∆∞·ªõc. M·ªôt s·ªë h·ªçc sinh c√≥ th·ªÉ ƒë√£ n·ªôp b√†i, m·ªôt s·ªë c√≥ th·ªÉ ch∆∞a n·ªôp.',
        DATEADD(day, -2, GETDATE()), 92, 1);

-- B√†i t·∫≠p ƒë√£ h·∫øt h·∫°n 3
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i ki·ªÉm tra T√≠ch ph√¢n b·ªôi - ƒê√£ h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y ƒë√£ h·∫øt h·∫°n n·ªôp t·ª´ 3 ng√†y tr∆∞·ªõc. M·ªôt s·ªë h·ªçc sinh c√≥ th·ªÉ ƒë√£ n·ªôp b√†i, m·ªôt s·ªë c√≥ th·ªÉ ch∆∞a n·ªôp.',
        DATEADD(day, -3, GETDATE()), 94, 1);

-- B√†i t·∫≠p ƒë√£ h·∫øt h·∫°n 4
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'·ª®ng d·ª•ng To√°n h·ªçc trong V·∫≠t l√Ω - ƒê√£ h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y ƒë√£ h·∫øt h·∫°n n·ªôp t·ª´ 4 ng√†y tr∆∞·ªõc. M·ªôt s·ªë h·ªçc sinh c√≥ th·ªÉ ƒë√£ n·ªôp b√†i, m·ªôt s·ªë c√≥ th·ªÉ ch∆∞a n·ªôp.',
        DATEADD(day, -4, GETDATE()), 96, 1);

-- B√†i t·∫≠p ƒë√£ h·∫øt h·∫°n 5
INSERT INTO assignments (title, description, due_date, points, classroom_id)
VALUES (N'B√†i t·∫≠p t·ªïng h·ª£p ƒê·∫°i s·ªë tuy·∫øn t√≠nh - ƒê√£ h·∫øt h·∫°n', 
        N'B√†i t·∫≠p n√†y ƒë√£ h·∫øt h·∫°n n·ªôp t·ª´ 5 ng√†y tr∆∞·ªõc. M·ªôt s·ªë h·ªçc sinh c√≥ th·ªÉ ƒë√£ n·ªôp b√†i, m·ªôt s·ªë c√≥ th·ªÉ ch∆∞a n·ªôp.',
        DATEADD(day, -5, GETDATE()), 98, 1);

PRINT N'‚úÖ ƒê√£ t·∫°o 5 b√†i t·∫≠p ƒë√£ h·∫øt h·∫°n';

-- Commit transaction
COMMIT TRANSACTION;

PRINT N'üéâ Ho√†n th√†nh t·∫°o d·ªØ li·ªáu m·∫´u cho classroom T√¥n!';
PRINT N'üìä T·ªïng k·∫øt:';
PRINT N'   - 5 h·ªçc sinh m·ªõi ƒë√£ ƒë∆∞·ª£c t·∫°o v√† ƒëƒÉng k√Ω v√†o classroom';
PRINT N'   - 5 b√†i t·∫≠p c·∫ßn ch·∫•m ƒëi·ªÉm (c√≥ submission s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü script ti·∫øp theo)';
PRINT N'   - 5 b√†i t·∫≠p s·∫Øp h·∫øt h·∫°n (due_date trong 1-5 ng√†y t·ªõi)';
PRINT N'   - 5 b√†i t·∫≠p ƒë√£ h·∫øt h·∫°n (due_date ƒë√£ qua 1-5 ng√†y)';

GO
